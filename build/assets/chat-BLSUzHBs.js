var L=n=>{throw TypeError(n)};var R=(n,t,s)=>t.has(n)||L("Cannot "+s);var p=(n,t,s)=>(R(n,t,"read from private field"),s?s.call(n):t.get(n)),M=(n,t,s)=>t.has(n)?L("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,s),P=(n,t,s,r)=>(R(n,t,"write to private field"),r?r.call(n,s):t.set(n,s),s),k=(n,t,s)=>(R(n,t,"access private method"),s);import{S as X,s as J,h as U,g as Y,n as _,u as H,r as g,j as e,a as z}from"./index-B_Kc4tba.js";import{c as Q}from"./balanceCalculations-BwgctEfh.js";var w,$,f,N,E,F,K,W,Z=(W=class extends X{constructor(t,s){super();M(this,E);M(this,w);M(this,$);M(this,f);M(this,N);P(this,w,t),this.setOptions(s),this.bindMethods(),k(this,E,F).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const s=this.options;this.options=p(this,w).defaultMutationOptions(t),J(this.options,s)||p(this,w).getMutationCache().notify({type:"observerOptionsUpdated",mutation:p(this,f),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&U(s.mutationKey)!==U(this.options.mutationKey)?this.reset():((r=p(this,f))==null?void 0:r.state.status)==="pending"&&p(this,f).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=p(this,f))==null||t.removeObserver(this)}onMutationUpdate(t){k(this,E,F).call(this),k(this,E,K).call(this,t)}getCurrentResult(){return p(this,$)}reset(){var t;(t=p(this,f))==null||t.removeObserver(this),P(this,f,void 0),k(this,E,F).call(this),k(this,E,K).call(this)}mutate(t,s){var r;return P(this,N,s),(r=p(this,f))==null||r.removeObserver(this),P(this,f,p(this,w).getMutationCache().build(p(this,w),this.options)),p(this,f).addObserver(this),p(this,f).execute(t)}},w=new WeakMap,$=new WeakMap,f=new WeakMap,N=new WeakMap,E=new WeakSet,F=function(){var s;const t=((s=p(this,f))==null?void 0:s.state)??Y();P(this,$,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},K=function(t){_.batch(()=>{var s,r,c,m,l,o,u,x;if(p(this,N)&&this.hasListeners()){const i=p(this,$).variables,a=p(this,$).context;(t==null?void 0:t.type)==="success"?((r=(s=p(this,N)).onSuccess)==null||r.call(s,t.data,i,a),(m=(c=p(this,N)).onSettled)==null||m.call(c,t.data,null,i,a)):(t==null?void 0:t.type)==="error"&&((o=(l=p(this,N)).onError)==null||o.call(l,t.error,i,a),(x=(u=p(this,N)).onSettled)==null||x.call(u,void 0,t.error,i,a))}this.listeners.forEach(i=>{i(p(this,$))})})},W);function ee(n,t){return typeof n=="function"?n(...t):!!n}function te(){}function se(n,t){const s=H(),[r]=g.useState(()=>new Z(s,n));g.useEffect(()=>{r.setOptions(n)},[r,n]);const c=g.useSyncExternalStore(g.useCallback(l=>r.subscribe(_.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),m=g.useCallback((l,o)=>{r.mutate(l,o).catch(te)},[r]);if(c.error&&ee(r.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:m,mutateAsync:c.mutate}}const ae=[{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo"},{id:"gpt-4",name:"GPT-4"},{id:"claude-3-sonnet",name:"Claude 3 Sonnet"},{id:"llama-2-70b",name:"Llama 2 70B"}],G=[{id:"minimal",name:"MÃ­nimo",description:"Respuestas muy rÃ¡pidas y bÃ¡sicas"},{id:"low",name:"Bajo",description:"Respuestas rÃ¡pidas y directas"},{id:"medium",name:"Medio",description:"Balance entre velocidad y razonamiento"},{id:"high",name:"Alto",description:"Razonamiento profundo y detallado"}];function ne({config:n,onConfigChange:t,isVisible:s,onToggleVisibility:r}){var i;const[c,m]=g.useState(n),[l,o]=g.useState("top-p"),u=()=>{const a={...c};a.temperature=Math.max(0,Math.min(2,a.temperature)),a.topK=Math.max(0,Math.min(20,a.topK)),a.topP=Math.max(0,Math.min(1,a.topP)),l==="top-p"?a.topK=0:a.topP=0,["minimal","low","medium","high"].includes(a.reasoningEffort)||(a.reasoningEffort="medium"),m(a),t(a),r()},x=()=>{m({model:"gpt-3.5-turbo",temperature:.7,topP:1,topK:0,reasoningEffort:"medium",maxTokens:1e3,systemPrompt:"Eres un asistente financiero especializado en la aplicaciÃ³n Walletfy. Tu trabajo es ayudar a los usuarios a entender y gestionar mejor sus finanzas personales basÃ¡ndote en los datos de su aplicaciÃ³n. Proporciona consejos Ãºtiles, anÃ¡lisis de patrones de gasto, y responde preguntas especÃ­ficas sobre sus transacciones e ingresos.",apiEndpoint:"http://localhost:4000/api/completion"})};return s?e.jsxs("div",{className:"bg-white border-t border-gray-200 p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 flex items-center gap-2",children:[e.jsx("span",{children:"âš™ï¸"}),"ConfiguraciÃ³n del Chat"]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 transition-colors",children:"âœ•"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modelo"}),e.jsx("select",{value:c.model,onChange:a=>m(h=>({...h,model:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ae.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Temperatura: ",c.temperature.toFixed(1)]}),e.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:c.temperature,onChange:a=>{const h=Math.max(0,Math.min(2,parseFloat(a.target.value)));m(b=>({...b,temperature:h}))},className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"MÃ¡s preciso (0)"}),e.jsx("span",{children:"MÃ¡s creativo (2)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modo de Sampling"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("button",{type:"button",onClick:()=>o("top-p"),className:`px-3 py-1 text-xs rounded-md transition-colors ${l==="top-p"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Top-P"}),e.jsx("button",{type:"button",onClick:()=>o("top-k"),className:`px-3 py-1 text-xs rounded-md transition-colors ${l==="top-k"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Top-K"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Solo uno puede estar activo"})]}),e.jsxs("div",{className:l==="top-k"?"opacity-50":"",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Top-P: ",c.topP.toFixed(2)]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:c.topP,disabled:l==="top-k",onChange:a=>{const h=Math.max(0,Math.min(1,parseFloat(a.target.value)));m(b=>({...b,topP:h}))},className:"w-full disabled:opacity-50"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"MÃ¡s determinista (0)"}),e.jsx("span",{children:"MÃ¡s diverso (1)"})]})]}),e.jsxs("div",{className:l==="top-p"?"opacity-50":"",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Top-K"}),e.jsx("input",{type:"number",min:"0",max:"20",step:"1",value:c.topK,disabled:l==="top-p",onChange:a=>{const h=Math.max(0,Math.min(20,parseInt(a.target.value)||0));m(b=>({...b,topK:h}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:opacity-50",placeholder:"0-20"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"NÃºmero de tokens candidatos (0-20, 0=desactivado)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Esfuerzo de Razonamiento"}),e.jsx("select",{value:c.reasoningEffort,onChange:a=>m(h=>({...h,reasoningEffort:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:G.map(a=>e.jsx("option",{value:a.id,title:a.description,children:a.name},a.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(i=G.find(a=>a.id===c.reasoningEffort))==null?void 0:i.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MÃ¡ximo de tokens"}),e.jsx("input",{type:"number",min:"100",max:"4000",step:"100",value:c.maxTokens,onChange:a=>m(h=>({...h,maxTokens:parseInt(a.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endpoint API"}),e.jsx("input",{type:"url",value:c.apiEndpoint,onChange:a=>m(h=>({...h,apiEndpoint:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"http://localhost:4000/api/completion"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prompt del sistema"}),e.jsx("textarea",{value:c.systemPrompt,onChange:a=>m(h=>({...h,systemPrompt:a.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Define cÃ³mo debe comportarse el asistente..."})]}),e.jsxs("div",{className:"flex justify-between pt-2",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:"ðŸ”„ Restablecer"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:u,className:"px-4 py-2 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"ðŸ’¾ Guardar"})]})]})]}):e.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-4 py-2",children:e.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx("span",{children:"âš™ï¸"}),"ConfiguraciÃ³n",e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:n.model})]})})}function re(n,t){const s=Q(n,t),r=n.filter(o=>o.type==="ingreso").reduce((o,u)=>o+u.amount,0),c=n.filter(o=>o.type==="egreso").reduce((o,u)=>o+u.amount,0),m=t+r-c,l=[...n].sort((o,u)=>new Date(u.date).getTime()-new Date(o.date).getTime()).slice(0,10).map(o=>({name:o.name,description:o.description,amount:o.amount,type:o.type,date:o.date}));return{initialBalance:t,totalEvents:n.length,totalIncome:r,totalExpenses:c,currentBalance:m,monthlyData:s.map(o=>({month:o.month,monthName:o.monthName,totalIncome:o.totalIncome,totalExpenses:o.totalExpenses,monthlyBalance:o.monthlyBalance,globalBalance:o.globalBalance,eventCount:o.events.length})),recentEvents:l}}async function oe(n,t,s){const r={...t,temperature:Math.max(0,Math.min(2,t.temperature)),topP:Math.max(0,Math.min(1,t.topP)),topK:Math.max(0,Math.min(20,t.topK))},c=`${t.systemPrompt}

CONTEXTO DE LA APLICACIÃ“N WALLETFY:
- Balance inicial del usuario: $${s.initialBalance}
- Balance actual: $${s.currentBalance.toFixed(2)}
- Total de eventos registrados: ${s.totalEvents}
- Ingresos totales: $${s.totalIncome.toFixed(2)}
- Gastos totales: $${s.totalExpenses.toFixed(2)}
- Balance neto: $${(s.totalIncome-s.totalExpenses).toFixed(2)}

DATOS POR MES:
${s.monthlyData.map(x=>`â€¢ ${x.monthName}: ${x.eventCount} eventos, Ingresos: $${x.totalIncome.toFixed(2)}, Gastos: $${x.totalExpenses.toFixed(2)}, Balance del mes: $${x.monthlyBalance.toFixed(2)}, Balance acumulado: $${x.globalBalance.toFixed(2)}`).join(`
`)}

EVENTOS RECIENTES (Ãºltimos 10):
${s.recentEvents.map((x,i)=>`${i+1}. ${x.name} - $${x.amount} (${x.type}) - ${new Date(x.date).toLocaleDateString()}`).join(`
`)}

Usa esta informaciÃ³n para proporcionar respuestas precisas y Ãºtiles sobre las finanzas del usuario. Puedes analizar patrones, dar consejos, identificar tendencias y responder preguntas especÃ­ficas basÃ¡ndote en estos datos reales.`,m={temperature:r.temperature,reasoning_effort:r.reasoningEffort};r.topP>0?m.top_p=r.topP:r.topK>0&&(m.top_k=r.topK);const l={input:`CONTEXTO: ${c}

PREGUNTA DEL USUARIO: ${n}`,params:m},o=await fetch(r.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!o.ok)throw new Error("Error al enviar mensaje");const u=await o.json();return{message:u.message||u.content||"Sin respuesta"}}async function ie(n,t,s,r,c,m){const l={...t,temperature:Math.max(0,Math.min(2,t.temperature)),topP:Math.max(0,Math.min(1,t.topP)),topK:Math.max(0,Math.min(20,t.topK))},o=`${t.systemPrompt}

CONTEXTO DE LA APLICACIÃ“N WALLETFY:
- Balance inicial del usuario: $${s.initialBalance}
- Balance actual: $${s.currentBalance.toFixed(2)}
- Total de eventos registrados: ${s.totalEvents}
- Ingresos totales: $${s.totalIncome.toFixed(2)}
- Gastos totales: $${s.totalExpenses.toFixed(2)}
- Balance neto: $${(s.totalIncome-s.totalExpenses).toFixed(2)}

DATOS POR MES:
${s.monthlyData.map(i=>`â€¢ ${i.monthName}: ${i.eventCount} eventos, Ingresos: $${i.totalIncome.toFixed(2)}, Gastos: $${i.totalExpenses.toFixed(2)}, Balance del mes: $${i.monthlyBalance.toFixed(2)}, Balance acumulado: $${i.globalBalance.toFixed(2)}`).join(`
`)}

EVENTOS RECIENTES (Ãºltimos 10):
${s.recentEvents.map((i,a)=>`${a+1}. ${i.name} - $${i.amount} (${i.type}) - ${new Date(i.date).toLocaleDateString()}`).join(`
`)}

Usa esta informaciÃ³n para proporcionar respuestas precisas y Ãºtiles sobre las finanzas del usuario. Puedes analizar patrones, dar consejos, identificar tendencias y responder preguntas especÃ­ficas basÃ¡ndote en estos datos reales.`,u={temperature:l.temperature,reasoning_effort:l.reasoningEffort};l.topP>0?u.top_p=l.topP:l.topK>0&&(u.top_k=l.topK);const x={input:`CONTEXTO: ${o}

PREGUNTA DEL USUARIO: ${n}`,params:u};try{const i=await fetch(l.apiEndpoint+"/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!i.ok)throw new Error("Error al conectar con el servidor de streaming");if(!i.body)throw new Error("El servidor no soporta streaming");const a=i.body.getReader(),h=new TextDecoder;let b="";try{let O=!0;for(;O;){const{done:D,value:B}=await a.read();if(D){O=!1;break}const A=h.decode(B,{stream:!0}).split(`
`);for(const I of A)if(I.startsWith("data: ")){const d=I.slice(6).trim();if(d==="[DONE]"){c(b);return}try{const y=JSON.parse(d);y.chunk&&(b+=y.chunk,r(y.chunk))}catch{}}}}finally{a.releaseLock()}}catch(i){m(i instanceof Error?i.message:"Error desconocido durante el streaming")}}function le(){const[n,t]=g.useState([]),[s,r]=g.useState(""),[c,m]=g.useState(!1),[l,o]=g.useState(null),[u,x]=g.useState(!1),[i,a]=g.useState(!0),h=()=>typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?"http://localhost:4000/api/completion":"/api/completion",[b,O]=g.useState({model:"gpt-3.5-turbo",temperature:.7,topP:1,topK:0,reasoningEffort:"medium",maxTokens:1e3,systemPrompt:"Eres un asistente financiero especializado en la aplicaciÃ³n Walletfy. Tu trabajo es ayudar a los usuarios a entender y gestionar mejor sus finanzas personales basÃ¡ndote en los datos de su aplicaciÃ³n. Proporciona consejos Ãºtiles, anÃ¡lisis de patrones de gasto, y responde preguntas especÃ­ficas sobre sus transacciones e ingresos.",apiEndpoint:h()}),D=z(d=>d.events.events),B=z(d=>d.app.initialBalance);g.useEffect(()=>{const d=re(D,B);o(d)},[D,B]);const C=se({mutationFn:d=>{if(!l)throw new Error("Contexto de la aplicaciÃ³n no disponible");return oe(d,b,l)},onSuccess:d=>{const y={id:Date.now().toString()+"-bot",content:d.message,isUser:!1,timestamp:new Date};t(v=>[...v,y])},onError:d=>{const y={id:Date.now().toString()+"-error",content:`âŒ Error: ${d.message}`,isUser:!1,timestamp:new Date};t(v=>[...v,y])}}),A=d=>{if(d.preventDefault(),!s.trim()||C.isPending||!l||u)return;const y={id:Date.now().toString(),content:s,isUser:!0,timestamp:new Date};if(t(v=>[...v,y]),i){x(!0);const v=Date.now().toString()+"-streaming",q={id:v,content:"",isUser:!1,timestamp:new Date};t(S=>[...S,q]),ie(s,b,l,S=>{t(T=>T.map(j=>{if(j.id===v){const V=j.content+S;return{...j,content:V}}return j}))},S=>{x(!1),t(T=>T.map(j=>j.id===v?{...j,content:S}:j))},S=>{x(!1);const T={id:Date.now().toString()+"-error",content:`âŒ Error de streaming: ${S}`,isUser:!1,timestamp:new Date};t(j=>[...j,T])})}else C.mutate(s);r("")},I=()=>{t([])};return l?e.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ¤–"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-semibold text-gray-800",children:["Asistente Financiero Walletfy",i&&e.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"ðŸŒŠ Streaming"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Balance actual: $",l.currentBalance.toFixed(2)," â€¢ ",l.totalEvents," eventos registrados"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:d=>a(d.target.checked),className:"rounded",disabled:u||C.isPending}),"Streaming"]}),e.jsx("button",{onClick:I,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors flex items-center gap-1",children:"ðŸ—‘ï¸ Limpiar Chat"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.length===0?e.jsxs("div",{className:"text-center text-gray-500 mt-20",children:[e.jsx("span",{className:"text-4xl block mb-4",children:"ðŸ’°"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Â¡Hola! Soy tu asistente financiero de Walletfy"}),e.jsx("p",{className:"text-sm mb-4",children:"Puedo ayudarte a:"}),e.jsxs("div",{className:"text-left max-w-md mx-auto space-y-2 text-sm",children:[e.jsx("p",{children:"â€¢ ðŸ“Š Analizar tus patrones de gasto e ingreso"}),e.jsx("p",{children:"â€¢ ðŸ’¡ Darte consejos financieros personalizados"}),e.jsx("p",{children:"â€¢ ðŸ“ˆ Revisar tu balance y tendencias mensuales"}),e.jsx("p",{children:"â€¢ ðŸ” Buscar informaciÃ³n especÃ­fica de tus transacciones"}),e.jsx("p",{children:"â€¢ ðŸŽ¯ Ayudarte a planificar mejor tu presupuesto"})]}),e.jsx("p",{className:"text-sm mt-4 text-blue-600",children:"Escribe cualquier pregunta sobre tus finanzas para comenzar"})]}):n.map(d=>e.jsx("div",{className:`flex ${d.isUser?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:"flex items-start gap-2 max-w-xs md:max-w-md lg:max-w-2xl",children:[!d.isUser&&e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:"ðŸ¤–"}),e.jsxs("div",{className:`px-4 py-2 rounded-lg ${d.isUser?"bg-blue-500 text-white rounded-br-sm":"bg-white border border-gray-200 rounded-bl-sm"}`,children:[e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:d.content}),e.jsx("p",{className:`text-xs mt-1 ${d.isUser?"text-blue-100":"text-gray-500"}`,children:d.timestamp.toLocaleTimeString()})]}),d.isUser&&e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:"ðŸ‘¤"})]})},d.id)),(C.isPending||u)&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:"ðŸ¤–"}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg rounded-bl-sm px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:u?"ðŸŒŠ Generando respuesta en tiempo real":"Analizando tus datos financieros"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})]})})]}),e.jsx(ne,{config:b,onConfigChange:O,isVisible:c,onToggleVisibility:()=>m(!c)}),e.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:e.jsxs("form",{onSubmit:A,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:d=>r(d.target.value),placeholder:i?"PregÃºntame (modo streaming activado)...":"PregÃºntame sobre tus finanzas, patrones de gasto, consejos, etc...",disabled:C.isPending||u,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100"}),e.jsxs("button",{type:"submit",disabled:!s.trim()||C.isPending||u,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1",children:[e.jsx("span",{children:i?"ðŸŒŠ":"ðŸ’¬"}),u?"Generando...":"Enviar"]})]})})]}):e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Cargando contexto de la aplicaciÃ³n..."})]})})}const ue=()=>e.jsx(le,{});export{ue as component};
